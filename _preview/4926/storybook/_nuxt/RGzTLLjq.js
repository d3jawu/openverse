import{u as S}from"./DZjlKxoF.js";import{f as N,v as b}from"./Xs_VBmP5.js";import{h as T}from"./D8ABh0bF.js";import{u as U,s as n}from"./DRH7DRcP.js";import{u as B}from"./D7Z5dmCo.js";import{u as H}from"./Dru8MgPD.js";import{u as M}from"./DQej5_ef.js";import{u as O,_ as V,a as z,b as F}from"./AomcoMUH.js";import{b as W}from"./DQZ7AVLk.js";import{s as j}from"./BOX21o1p.js";import{u as q}from"./DQs5-Eiu.js";import{u as G}from"./U05EHdjt.js";import{u as J}from"./BMH_poVT.js";import{_ as K}from"./NBQ7ssm6.js";import{_ as L}from"./ui73IGvF.js";import{_ as Q}from"./B_5V2bNy.js";import{_ as X}from"./m7zcss4z.js";import{_ as Y}from"./Dwsoy3La.js";import{d as Z,z as h,S as tt,ag as ot,W as et,D as a,H as d,A as f,N as x,U as c,P as at,E as m,I as y,C as it,M as A}from"./DIRjBTfL.js";import"./B2WlxZpZ.js";import"./DT9s3jb5.js";import"./CFMQYC2y.js";import"./Dt-H8hG_.js";import"./CTON8dBl.js";import"./BaD6kt_k.js";import"./Cpj98o6Y.js";import"./Ci7G4jyV.js";import"./D7p9i7S1.js";import"./BwYXyR0A.js";import"./CVtkxrq9.js";import"./C0a-n2GY.js";import"./BGFP1kuB.js";import"./yH-X360_.js";import"./BhVvqNG6.js";import"../sb-preview/runtime.js";import"./Bz7P8nyL.js";import"./Co_6C_Y0.js";import"./BSEdKPgk.js";import"./D49-a2Gj.js";import"./n5kG8ZGm.js";import"./Cf7ZGiFl.js";import"./Dfz0o16W.js";import"./DlAUqK2U.js";import"./BUAT3EOX.js";import"./BQ1v-1nn.js";import"./CuPsdpTl.js";import"./m6RLzbCz.js";import"./D8jkAchZ.js";import"./Bnkvtx4f.js";import"./D0ww02ZN.js";import"./BakiBEjz.js";import"./CBV_TNzK.js";import"./BCZrajsX.js";import"./DQnMOLSw.js";import"./B9OEfXZU.js";import"./Cq4psN1U.js";import"./uju1JVgF.js";import"./C8aAYuhd.js";import"./CWNpd1Mu.js";import"./D7TfKMM8.js";import"./-TaKdCZx.js";import"./CFDM1QBy.js";import"./gEJdwIBZ.js";import"./CWKBBmmQ.js";import"./BllLUjK0.js";import"./RevM6cLn.js";import"./WxAe2_--.js";import"./BO06l8fi.js";import"./719p7lAS.js";import"./BMQHI8S6.js";import"./BJxYu9Tg.js";import"./BS9R2VWD.js";import"./IM6WYjsK.js";import"./BNp_2Fah.js";import"./KJFLyvLC.js";import"./B2z6H_yQ.js";import"./evtOUYYW.js";import"./i1_L4g2b.js";import"./BcrC-lJ8.js";import"./DVHw1-Ho.js";import"./hFje-mMC.js";import"./DC-AD4tD.js";const rt=["id"],mt={class:"mx-auto mt-10 flex flex-col gap-10 px-6 lg:mt-16 lg:max-w-5xl lg:gap-16"},st={class:"h-[75px] w-[75px] flex-none overflow-hidden rounded-sm lg:h-30 lg:w-30"},Mo=Z({name:"AudioDetailPage",__name:"index",async setup(pt){var g;let s,v;J();const i=U(),u=M(),e=h(()=>N(u==null?void 0:u.params.id)),w=S();(!e.value||!b(e.value))&&n({statusCode:404,message:`Invalid audio id: "${e.value}".`,fatal:!0});const t=tt((g=i.audio)!=null&&g.id&&e.value&&i.audio.id===e.value?i.audio:null),r=h(()=>i.fetchState.fetchingError),{isHidden:C,reveal:I}=G(t.value),{pageTitle:k,detailPageMeta:E}=O(t);H(()=>({...E,title:k.value}));const{sendCustomEvent:$}=q(),D=(o,p)=>{$("AUDIO_INTERACTION",{...o,component:p})},R=async()=>{if(w.isHydrating)return t.value;const o=await i.fetch(W,e.value);if(o)return t.value=o,o;throw new Error(`Could not fetch audio with id ${e.value}`)},{error:l}=([s,v]=ot(async()=>B("single-audio",async()=>await R(),{lazy:!0,server:!1})),s=await s,v(),s),_=o=>{["Audio not found","Audio ID not found"].includes(o.message)&&n({statusCode:404,message:"Audio ID not found",fatal:!0}),r.value&&!T(r.value)&&n({...r.value??{},fatal:!0})};return l.value&&_(l.value),et(l,o=>{o&&_(o)}),(o,p)=>(a(),d("main",{id:c(j),tabindex:"-1",class:"relative flex-grow"},[r.value?(a(),f(Y,{key:0,"fetching-error":r.value,class:"px-6 py-10 lg:px-10"},null,8,["fetching-error"])):t.value?(a(),d(x,{key:1},[c(C)?(a(),f(Q,at({key:0},t.value,{onReveal:c(I)}),null,16,["onReveal"])):(a(),d(x,{key:1},[m(V,{media:t.value},null,8,["media"]),m(K,{layout:"full",audio:t.value,class:"main-track",onInteracted:p[0]||(p[0]=P=>D(P,"AudioDetailPage"))},null,8,["audio"]),y("div",mt,[m(L,{media:t.value},null,8,["media"]),m(z,{media:t.value},{thumbnail:it(()=>[y("div",st,[m(X,{audio:t.value},null,8,["audio"])])]),_:1},8,["media"]),t.value?(a(),f(F,{key:0,"media-type":"audio","related-to":t.value.id,class:"mb-12"},null,8,["related-to"])):A("",!0)])],64))],64)):A("",!0)],8,rt))}});export{Mo as default};
