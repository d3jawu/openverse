import{_ as E}from"./C7ap0NCC.js";import{w as f,b as h,a as z}from"./BGFP1kuB.js";import{o as A}from"./BaD6kt_k.js";import{u as M}from"./DKeW2LvZ.js";import{V as O}from"./CcZT6l24.js";import{_ as D}from"./DXFirxxP.js";import{_ as N}from"./DmjChvEw.js";import{d as P,F as U,S as b,z as i,W as q,H,I as J,E as t,C as v,P as L,U as o,Q as w,D as Q,J as W,K as j}from"./DIRjBTfL.js";const te=P({inheritAttrs:!1,__name:"VSearchBar",props:{modelValue:{default:""},placeholder:{}},emits:["update:modelValue","submit","recent-hidden"],setup(x,{emit:y}){const _=x,a=y,g=U(),u=b(null),m=b(null),r=i({get:()=>_.modelValue??"",set:e=>{a("update:modelValue",e)}}),V=()=>{a("submit")},S=i(()=>"top-14"),C=()=>{var e;(e=m.value)==null||e.focusInput()},K=()=>{p.value.length||n()},{handleKeydown:B,handleSelect:$,handleClear:F,recent:{show:R,hide:n,isVisible:l,selectedIdx:c,entries:p}}=M({focusInput:C,term:r,isMobile:!1});A(u,n),q(l,e=>{e||a("recent-hidden")});const k=i(()=>{const{class:e,...s}=g;return s});return(e,s)=>{const I=E;return Q(),H("div",{ref_key:"searchBarEl",ref:u,class:w(["relative",e.$attrs.class])},[J("form",{action:"/search",role:"search",class:"search-bar group flex h-12 flex-row items-center rounded-sm border-tx bg-default",onSubmit:h(V,["prevent"])},[t(O,L({ref_key:"inputFieldRef",ref:m},k.value,{modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=d=>r.value=d),placeholder:e.placeholder||e.$t("hero.search.placeholder"),class:"search-field flex-grow border-tx bg-secondary text-secondary focus-within:bg-default focus:border-focus group-hover:bg-secondary group-hover:text-default group-hover:focus-within:bg-default","label-text":e.$t("search.searchBarLabel",{openverse:"Openverse"}),"connection-sides":["end"],"field-id":"search-bar",type:"search",autocomplete:"off",name:"q",role:"combobox","aria-autocomplete":"none","aria-expanded":o(l),"aria-controls":"recent-searches-list","aria-activedescendant":o(c)!==void 0?`option-${o(c)}`:void 0,onFocus:o(R),onKeydown:o(B)}),{default:v(()=>[W(e.$slots,"default")]),_:3},16,["modelValue","placeholder","label-text","aria-expanded","aria-activedescendant","onFocus","onKeydown"]),t(D,{type:"submit",route:"search",onKeydown:f(h(K,["exact"]),["tab"])},null,8,["onKeydown"])],32),t(I,null,{default:v(()=>[j(t(N,{"selected-idx":o(c),entries:o(p),class:w(["absolute inset-x-0 z-popover lg:flex",S.value]),onSelect:o($),onClear:s[1]||(s[1]=d=>o(F)(d)),onKeydown:f(o(n),["tab"])},null,8,["selected-idx","entries","class","onSelect","onKeydown"]),[[z,o(l)]])]),_:1})],2)}}});export{te as _};
