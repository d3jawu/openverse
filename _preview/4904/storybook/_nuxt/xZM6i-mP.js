import{u as S}from"./CiFXGpc2.js";import{f as N,v as b}from"./Xs_VBmP5.js";import{h as T}from"./D-k7DCjt.js";import{u as V,s as n}from"./By-ckOt8.js";import{u as B}from"./CYcxQN8I.js";import{u as M}from"./Ds0Wu5KN.js";import{u as O}from"./BheX1Zp4.js";import{u as U,_ as H,a as F,b as z}from"./DVVmfCYG.js";import{b as G}from"./Bqqd15Vm.js";import{s as J}from"./BOX21o1p.js";import{u as L}from"./CsQIKZHD.js";import{u as W}from"./baCxGTTy.js";import{u as j}from"./BhYPKc8Z.js";import{_ as q}from"./DsIkXejb.js";import{_ as K}from"./Caz5ds_d.js";import{V as Q}from"./CP8BXRTD.js";import{_ as X}from"./DV47zK50.js";import{_ as Y}from"./B-XDypkf.js";import{d as Z,N as h,A as tt,ag as ot,T as et,M as a,D as d,O as f,F as x,I as c,R as at,L as m,J as y,P as it,G as A}from"./3w4k60lH.js";import"./BFSUimDm.js";import"./qyDmD4fY.js";import"./CFMQYC2y.js";import"./Dt-H8hG_.js";import"./CTON8dBl.js";import"./CP4nIMOC.js";import"./Cpj98o6Y.js";import"./Ci7G4jyV.js";import"./lQMUZJX_.js";import"./ByTiJpPE.js";import"./CVtkxrq9.js";import"./BSkdydGD.js";import"./DLdssb3b.js";import"./yH-X360_.js";import"./Bt0t79L8.js";import"../sb-preview/runtime.js";import"./Bz7P8nyL.js";import"./B2tpwjEJ.js";import"./BSEdKPgk.js";import"./CyecUNdH.js";import"./cbNq9jmL.js";import"./DyI3UsyA.js";import"./CYrQIHx3.js";import"./DlAUqK2U.js";import"./B00k6Lod.js";import"./BohTCMpu.js";import"./Dm22SxXZ.js";import"./D1dKGURj.js";import"./Bnkvtx4f.js";import"./D0ww02ZN.js";import"./HLQs0lI_.js";import"./CC3O4PT8.js";import"./DjfkZMYu.js";import"./DQnMOLSw.js";import"./CrY2j4VE.js";import"./1JpoQThl.js";import"./BSwOHhic.js";import"./DdldjR6J.js";import"./DossPrlS.js";import"./DCNY3wQ9.js";import"./-TaKdCZx.js";import"./y4sJajyg.js";import"./1SXAe4jj.js";import"./B7Srk2Ks.js";import"./BnNEoJIf.js";import"./RevM6cLn.js";import"./B_yMFMKf.js";import"./B9mo_w6C.js";import"./Ua2mhSTn.js";import"./BOCIT4X8.js";import"./CUDD5eB1.js";import"./BS9R2VWD.js";import"./CbOBgsgP.js";import"./rw0F6EcL.js";import"./mzNvDRtY.js";import"./iyHUKtTs.js";import"./evtOUYYW.js";import"./i1_L4g2b.js";import"./BFQMKLeF.js";import"./CAHSbojq.js";import"./EMHqGTN8.js";import"./DC-AD4tD.js";const rt=["id"],mt={class:"mx-auto mt-10 flex flex-col gap-10 px-6 lg:mt-16 lg:max-w-5xl lg:gap-16"},st={class:"h-[75px] w-[75px] flex-none overflow-hidden rounded-sm lg:h-30 lg:w-30"},Mo=Z({name:"AudioDetailPage",__name:"index",async setup(ut){var g;let s,v;j();const i=V(),l=O(),e=h(()=>N(l==null?void 0:l.params.id)),w=S();(!e.value||!b(e.value))&&n({statusCode:404,message:`Invalid audio id: "${e.value}".`,fatal:!0});const t=tt((g=i.audio)!=null&&g.id&&e.value&&i.audio.id===e.value?i.audio:null),r=h(()=>i.fetchState.fetchingError),{isHidden:I,reveal:C}=W(t.value),{pageTitle:k,detailPageMeta:R}=U(t);M(()=>({...R,title:k.value}));const{sendCustomEvent:D}=L(),E=(o,u)=>{D("AUDIO_INTERACTION",{...o,component:u})},$=async()=>{if(w.isHydrating)return t.value;const o=await i.fetch(G,e.value);if(o)return t.value=o,o;throw new Error(`Could not fetch audio with id ${e.value}`)},{error:p}=([s,v]=ot(async()=>B("single-audio",async()=>await $(),{lazy:!0,server:!1})),s=await s,v(),s),_=o=>{["Audio not found","Audio ID not found"].includes(o.message)&&n({statusCode:404,message:"Audio ID not found",fatal:!0}),r.value&&!T(r.value)&&n({...r.value??{},fatal:!0})};return p.value&&_(p.value),et(p,o=>{o&&_(o)}),(o,u)=>(a(),d("main",{id:c(J),tabindex:"-1",class:"relative flex-grow"},[r.value?(a(),f(Y,{key:0,"fetching-error":r.value,class:"px-6 py-10 lg:px-10"},null,8,["fetching-error"])):t.value?(a(),d(x,{key:1},[c(I)?(a(),f(Q,at({key:0},t.value,{onReveal:c(C)}),null,16,["onReveal"])):(a(),d(x,{key:1},[m(H,{media:t.value},null,8,["media"]),m(q,{layout:"full",audio:t.value,class:"main-track",onInteracted:u[0]||(u[0]=P=>E(P,"AudioDetailPage"))},null,8,["audio"]),y("div",mt,[m(K,{media:t.value},null,8,["media"]),m(F,{media:t.value},{thumbnail:it(()=>[y("div",st,[m(X,{audio:t.value},null,8,["audio"])])]),_:1},8,["media"]),t.value?(a(),f(z,{key:0,"media-type":"audio","related-to":t.value.id,class:"mb-12"},null,8,["related-to"])):A("",!0)])],64))],64)):A("",!0)],8,rt))}});export{Mo as default};
